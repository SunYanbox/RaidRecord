@using SPTarkov.Server.Core.Models.Eft.Common
@using SPTarkov.Server.Core.Models.Eft.Profile

@inject I18NMgr I18NMgr

<MudCardContent Class="bot-info-mud-card-content" Style="@Style">
    <MudText>PMC @("profile::info".Translate(I18NMgr.I18N!))</MudText>
    <MudText Class="two-char-indent">@("nickname".Translate(I18NMgr.I18N!)): @PmcData?.Info?.Nickname</MudText>
    <MudText Class="two-char-indent">@("webUI.lowerNickname".Translate(I18NMgr.I18N!)): @PmcData?.Info?.LowerNickname</MudText>
    <MudText Class="two-char-indent">@("level".Translate(I18NMgr.I18N!)): @PmcData?.Info?.Level</MudText>
    <MudText Class="two-char-indent">@("webUI.gameVersion".Translate(I18NMgr.I18N!)): @PmcData?.Info?.GameVersion</MudText>
    <MudText Class="two-char-indent">@("side".Translate(I18NMgr.I18N!)): @PmcData?.Info?.Side</MudText>
    <MudText>SCAV @("profile::info".Translate(I18NMgr.I18N!))</MudText>
    @if (_botInfoShowAll)
    {
        <MudText Class="two-char-indent">@("nickname".Translate(I18NMgr.I18N!)): @ScavData?.Info?.Nickname</MudText>
        <MudText Class="two-char-indent">@("webUI.lowerNickname".Translate(I18NMgr.I18N!)): @ScavData?.Info?.LowerNickname</MudText>
        <MudText Class="two-char-indent">@("level".Translate(I18NMgr.I18N!)): @ScavData?.Info?.Level</MudText>
        <MudText Class="two-char-indent">@("webUI.gameVersion".Translate(I18NMgr.I18N!)): @ScavData?.Info?.GameVersion</MudText>
        <MudText Class="two-char-indent">@("side".Translate(I18NMgr.I18N!)): @ScavData?.Info?.Side</MudText>
    }
    <MudCardActions>
        <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(() => ToggleShowAll())">
            @_botInfoShowAllText
        </MudButton>
    </MudCardActions>
    <style>
        .two-char-indent {
            text-indent: 2ch;
        }

        .bot-info-mud-card-content {
            border: 2px solid #ccc;
        }
    </style>
</MudCardContent>

@code {
    [Parameter]
    public SptProfile? SptProfile { get; set; }
    [Parameter] public string? Style { get; set; }

    private PmcData? PmcData => SptProfile?.CharacterData?.PmcData;
    private PmcData? ScavData => SptProfile?.CharacterData?.ScavData;

    private string? _collapse;
    private string? _expand;

    private bool _botInfoShowAll;
    private string? _botInfoShowAllText;

    private void ToggleShowAll()
    {
        _botInfoShowAll = !_botInfoShowAll;
        _botInfoShowAllText = _botInfoShowAll ? _collapse : _expand;
    }

    protected override void OnInitialized()
    {
        base.OnInitialized();
        _collapse = "collapse".Translate(I18NMgr.I18N!);
        _expand = "expand".Translate(I18NMgr.I18N!);
        _botInfoShowAllText = _expand;
    }
}