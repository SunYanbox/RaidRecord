@using SPTarkov.Server.Core.Models.Eft.Common
@using SPTarkov.Server.Core.Models.Eft.Profile

@inject I18N I18N

<MudCardContent Class="bot-info-mud-card-content" Style="@Style">
    <MudText>PMC @I18N.WebUILocal.Link(I18N.WebUILocal.Profile, I18N.WebUILocal.Info)</MudText>
    <MudText Class="two-char-indent">@I18N.WebUILocal.Nickname: @PmcData?.Info?.Nickname</MudText>
    <MudText Class="two-char-indent">@I18N.WebUILocal.LowerNickname: @PmcData?.Info?.LowerNickname</MudText>
    <MudText Class="two-char-indent">@I18N.WebUILocal.Level: @PmcData?.Info?.Level</MudText>
    <MudText Class="two-char-indent">@I18N.WebUILocal.GameVersion: @PmcData?.Info?.GameVersion</MudText>
    <MudText Class="two-char-indent">@I18N.WebUILocal.Side: @PmcData?.Info?.Side</MudText>
    <MudText>SCAV @I18N.WebUILocal.Link(I18N.WebUILocal.Profile, I18N.WebUILocal.Info)</MudText>
    @if (_botInfoShowAll)
    {
        <MudText Class="two-char-indent">@I18N.WebUILocal.Nickname: @ScavData?.Info?.Nickname</MudText>
        <MudText Class="two-char-indent">@I18N.WebUILocal.LowerNickname: @ScavData?.Info?.LowerNickname</MudText>
        <MudText Class="two-char-indent">@I18N.WebUILocal.Level: @ScavData?.Info?.Level</MudText>
        <MudText Class="two-char-indent">@I18N.WebUILocal.GameVersion: @ScavData?.Info?.GameVersion</MudText>
        <MudText Class="two-char-indent">@I18N.WebUILocal.Side: @ScavData?.Info?.Side</MudText>
    }
    <MudCardActions>
        <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(() => ToggleShowAll())">
            @_botInfoShowAllText
        </MudButton>
    </MudCardActions>
    <style>
        .two-char-indent {
            text-indent: 2ch;
        }

        .bot-info-mud-card-content {
            border: 2px solid #ccc;
        }
    </style>
</MudCardContent>

@code {
    [Parameter]
    public SptProfile? SptProfile { get; set; }
    [Parameter] public string? Style { get; set; }

    private PmcData? PmcData => SptProfile?.CharacterData?.PmcData;
    private PmcData? ScavData => SptProfile?.CharacterData?.ScavData;

    private bool _botInfoShowAll;
    private string? _botInfoShowAllText;

    private void ToggleShowAll()
    {
        _botInfoShowAll = !_botInfoShowAll;
        _botInfoShowAllText = _botInfoShowAll ? I18N.WebUILocal.Collapse : I18N.WebUILocal.Expand;
    }

    protected override void OnInitialized()
    {
        base.OnInitialized();
        _botInfoShowAllText = I18N.WebUILocal.Expand;
    }
}