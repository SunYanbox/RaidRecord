@inherits LayoutComponentBase
@inject ModMetadata ModMetadata
@inject ModConfig ModConfig
@inject I18NMgr I18NMgr

<HeadContent>
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet"/>
    <link href="@Assets["_content/MudBlazor/MudBlazor.min.css"]" rel="stylesheet"/>
</HeadContent>

@* Required *@
<MudThemeProvider IsDarkMode="@ModConfig.Configs.DarkMode"/>
<MudPopoverProvider/>

@* Needed for dialogs *@
<MudDialogProvider/>

@* Needed for snackbars *@
<MudSnackbarProvider/>

<MudLayout>
    <MudAppBar Elevation="2" Style="width: 100%">
        <MudText Typo="Typo.body1" Style="min-width: 18ch">@NameAndVersion</MudText>
        <MudNavLink Class="mud-nav-link" Href="/RaidRecord" Match="NavLinkMatch.All">@I18NMgr.WebUILocal.NavLinkHome</MudNavLink>
        <MudNavLink Class="mud-nav-link" Href="/RaidRecord/List" Match="NavLinkMatch.All">@I18NMgr.WebUILocal.NavLinkList</MudNavLink>
        <MudNavLink Class="mud-nav-link" Href="/RaidRecord/Info" Match="NavLinkMatch.All">@I18NMgr.WebUILocal.NavLinkInfo</MudNavLink>
        <MudNavLink Class="mud-nav-link" Href="/RaidRecord/Price" Match="NavLinkMatch.All">@I18NMgr.WebUILocal.NavLinkPrice</MudNavLink>
        <MudSpacer/>
        <MudNavLink Class="mud-nav-link" Href="/RaidRecord/Setting" Match="NavLinkMatch.All">@I18NMgr.WebUILocal.NavLinkSettings</MudNavLink>
        <MudLink Class="mud-nav-link" Color="Color.Default" Target="_blank" Href="@Url">@I18NMgr.WebUILocal.NavLinkAbout</MudLink>
        <style>
            .mud-nav-link {
                width: fit-content;
            }
        </style>
    </MudAppBar>

    <MudMainContent Class="mud-main-content">
        @Body
    </MudMainContent>

    <style>
        .mud-main-content {
            transition: margin-left 0.3s ease;
        }
    </style>

    <script src="@Assets["_content/MudBlazor/MudBlazor.min.js"]"></script>
    <script src="@Assets["_framework/blazor.server.js"]"></script>
</MudLayout>

@code
{
    private string NameAndVersion => $"{ModMetadata.Name} {ModMetadata.Version}";
    private string? Url => ModMetadata.Url;
}